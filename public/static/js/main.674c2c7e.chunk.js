(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{12:function(e,t,n){e.exports=n(17)},17:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(7),c=n.n(r),i=(n(2),n(11)),l=n(1),s=n(8),u=n.n(s);var p=function(){return o.a.createElement("header",{className:"header"},o.a.createElement("img",{className:"header__logo",src:u.a,alt:"logo.pic"}))},m=n(9),d=n(10),_=function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :( ".concat(e.status))},f=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(m.a)(this,e),this._baseUrl=n,this._headers=a}return Object(d.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(_)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(_)}},{key:"updateUserImage",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(_)}},{key:"getItems",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(_)}},{key:"deleteItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e._id),{method:"DELETE",headers:this._headers}).then(_)}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(_)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(_)}},{key:"createItem",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(_)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-14",headers:{authorization:"957c9aa7-6dd0-46ee-b746-30b25c4b69ab","Content-Type":"application/json"}}),h=n(5),b=o.a.createContext();var v=function(e){var t=e.onClick,n=e.onCardDislike,a=e.onCardLike,r=e.onCardDelete,c=e.card,i=Object(h.a)(e,["onClick","onCardDislike","onCardLike","onCardDelete","card"]),l=o.a.useContext(b),s=c.owner._id===l._id,u=c.likes.some((function(e){return e._id===l._id})),p="element__like-button ".concat(u?"element__like-button_active":"");return o.a.createElement("div",Object.assign({className:"element"},i),o.a.createElement("img",{className:"element__image",onClick:function(){t(c)},src:c&&c.link}),o.a.createElement("div",{className:"element__item"},o.a.createElement("h3",{className:"element__text"},c&&c.name),o.a.createElement("div",{className:"element__like-container"},o.a.createElement("button",{type:"button",className:"".concat(p),onClick:function(){u?n(c):a(c)}}),o.a.createElement("h4",{className:"element__like-counter"},c&&c.likes.length)),s&&o.a.createElement("button",{type:"button",className:"element__remove-button",onClick:function(){r(c)}})))},E=o.a.createContext();var k=function(e){var t=o.a.useContext(b),n=o.a.useContext(E);return o.a.createElement("main",null,o.a.createElement("div",null,o.a.createElement("section",{className:"profile"},o.a.createElement("div",{className:"profile__container"},o.a.createElement("button",{className:"profile__avatar",type:"button",onClick:e.onClickAvatar,style:{backgroundImage:"url(".concat(t.avatar,")")}}),o.a.createElement("div",{className:"profile__author-card"},o.a.createElement("div",{className:"profile__text-container"},o.a.createElement("h1",{className:"profile__text"},t.name),o.a.createElement("p",{className:"profile__subtext"},t.about)),o.a.createElement("button",{type:"button",className:"profile__edit-button",onClick:e.onClickProfile}))),o.a.createElement("button",{type:"button",className:"profile__add-button",onClick:e.onClickNewPlace})),o.a.createElement("section",{className:"elements"},n.map((function(t){return o.a.createElement(v,{card:t,key:t._id,onClick:e.onCardClick,onCardDelete:e.onCardDelete,onCardLike:e.onCardLike,onCardDislike:e.onCardDislike})})))))};var C=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9",(new Date).getFullYear()," Mesto Russia"))};function g(e){var t=e.isOpen,n=e.card,a=e.onClose;return o.a.createElement("div",{className:"popup popup_zoom ".concat(t?"popup_opened":"")},o.a.createElement("div",{className:"popup__container"},o.a.createElement("img",{className:"popup__image",src:n&&n.link}),o.a.createElement("button",{type:"button",className:"popup__close-button_zoom popup__close-button",onClick:a}),o.a.createElement("p",{className:"popup__caption"},n&&n.name)))}function N(e){var t=e.onClose,n=e.isOpen,a=e.onSubmit,r=e.name,c=e.formElement,i=e.title,l=e.children,s=e.submitTitle,u=Object(h.a)(e,["onClose","isOpen","onSubmit","name","formElement","title","children","submitTitle"]);return o.a.createElement("div",{className:"popup ".concat(r," ").concat(n?"popup_opened":"")},o.a.createElement("form",Object.assign({},u,{onSubmit:a,className:"".concat(c," popup__form"),noValidate:!0}),o.a.createElement("button",{className:"popup__close-button",type:"button",onClick:t}),o.a.createElement("h2",{className:"popup__text"},i),l,o.a.createElement("button",{className:"popup__submit-button",type:"submit"},s)))}function O(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlace,r=o.a.useRef(""),c=o.a.useRef("");return o.a.createElement(N,{name:"popup_new-place",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:r.current.value,link:c.current.value}),r.current.value=null,c.current.value=null},title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c mesto",formElement:"popup__form_new-place",submitTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c mesto"},o.a.createElement("input",{ref:r,className:"popup__input popup__input_new-place_name",id:"newplace-name-input",name:"name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30"}),o.a.createElement("span",{className:"popup__input-error",id:"newplace-name-input-error"}),o.a.createElement("input",{ref:c,className:"popup__input popup__input_new-place_link",id:"newplace-link-input",name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"newplace-link-input-error"}))}function y(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,r=o.a.useContext(b),c=o.a.useState(""),i=Object(l.a)(c,2),s=i[0],u=i[1],p=o.a.useState(""),m=Object(l.a)(p,2),d=m[0],_=m[1];return o.a.useEffect((function(){u(r.name),_(r.about)}),[r]),o.a.createElement(N,{name:"",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,about:d}),e.target.reset()},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",formElement:"",submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement("input",{className:"popup__input popup__input_name",pattern:"[a-zA-Z\u0410-\u042f\u0401\u0430-\u044f\u0451\\s\\-]+[^\\s\\-]+",id:"name-input",type:"text",name:"name",placeholder:"\u0418\u043c\u044f",required:!0,minLength:"2",maxLength:"40",onChange:function(e){u(e.target.value)},value:s}),o.a.createElement("span",{className:"popup__input-error",id:"name-input-error"}),o.a.createElement("input",{className:"popup__input popup__input_job",id:"job-input",type:"text",name:"about",pattern:"[a-zA-Z\u0410-\u042f\u0401\u0430-\u044f\u0451\\s\\-]+[^\\s\\-]+",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",required:!0,minLength:"2",maxLength:"200",onChange:function(e){_(e.target.value)},value:d}),o.a.createElement("span",{className:"popup__input-error",id:"job-input-error"}))}function U(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,r=o.a.useRef("");return o.a.createElement(N,{name:"popup_avatar",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(e),a({avatar:r.current.value})},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",formElement:"popup__form_avatar",submitTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{ref:r,className:"popup__input popup__input_avatar",id:"avatar-link-input",name:"avatar",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0}),o.a.createElement("span",{className:"popup__input-error",id:"avatar-link-input-error"}))})}var j=function(){var e=o.a.useState(!1),t=Object(l.a)(e,2),n=t[0],a=t[1],r=o.a.useState(!1),c=Object(l.a)(r,2),s=c[0],u=c[1],m=o.a.useState(!1),d=Object(l.a)(m,2),_=d[0],h=d[1],v=o.a.useState({isOpen:!1,link:"",name:""}),N=Object(l.a)(v,2),j=N[0],w=N[1],x=o.a.useState({}),S=Object(l.a)(x,2),I=S[0],L=S[1],D=o.a.useState([]),P=Object(l.a)(D,2),T=P[0],A=P[1];function q(){u(!1),h(!1),a(!1),w({isOpen:!1,link:"",name:""})}return o.a.useEffect((function(){Promise.all([f.getUserInfo(),f.getItems()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];L(n),A(a)})).catch((function(e){return console.log(e)}))}),[]),o.a.createElement(b.Provider,{value:I},o.a.createElement(E.Provider,{value:T},o.a.createElement("div",{className:"page"},o.a.createElement(p,null),o.a.createElement(k,{onClickAvatar:function(){u(!0)},onClickProfile:function(){a(!0)},onClickNewPlace:function(){h(!0)},onCardClick:function(e){w({isOpen:!0,link:e.link,name:e.name})},onCardDelete:function(e){f.deleteItem(e).then((function(){var t=T.filter((function(t){return t._id!==e._id}));A(t)})).catch((function(e){return console.log(e)}))},onCardLike:function(e){f.putLike(e._id).then((function(t){var n=T.map((function(n){return n._id===e._id?t:n}));A(n)})).catch((function(e){return console.log(e)}))},onCardDislike:function(e){f.deleteLike(e._id).then((function(t){var n=T.map((function(n){return n._id===e._id?t:n}));A(n)})).catch((function(e){return console.log(e)}))},profileIsOpen:n,avatarIsOpen:s,newPlaceIsOpen:_,card:j}),o.a.createElement(U,{isOpen:s,onClose:q,onUpdateAvatar:function(e){f.updateUserImage(e).then((function(e){L(e),q()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(y,{isOpen:n,onClose:q,onUpdateUser:function(e){f.updateUserInfo(e).then((function(e){L(e),q()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(O,{isOpen:_,onClose:q,onAddPlace:function(e){f.createItem(e).then((function(e){A([e].concat(Object(i.a)(T))),q()})).catch((function(e){return console.log(e)}))}}),o.a.createElement(g,{isOpen:j.isOpen,card:j,onClose:q}),o.a.createElement(C,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},2:function(e,t,n){},8:function(e,t,n){e.exports=n.p+"static/media/logo.855a8c98.svg"}},[[12,1,2]]]);
//# sourceMappingURL=main.674c2c7e.chunk.js.map